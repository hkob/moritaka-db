%h1=show_title

%ul.nav.nav-tabs
  -@heads.each do |array|
    -first = array.first
    -last = array.last
    -head=@lhead_hash[first]
    %li{class:(head == @head) ? "active disable" : nil}=link_to "#{first} - #{last}", songs_path(head:head)

%table.table-bordered.table-striped.table-hover
  %thead
    %tr
      -%w(link.songs head.another_name activerecord.attributes.song.date).each do |k|
        %th=t k
      %th=t 'head.control'
  %tbody
    -@songs.each do |song|
      -next if song.parent
      -name = song.name(@is_ja)
      -has_children = false
      %tr{id:name}
        %td=name
        %td
          -song.children.each do |p|
            -has_children = true
            =p.name(@is_ja)
            -if @is_dev
              .btn-group.btn-group-xs
                =link_to t('link.delete_link'), song_path(p, song:{ parent_id:nil }), method: :put, class:"btn btn-default"
        %td=mgdnw(song.date)
        %td.btn-group.btn-group-xs
          =link_to t('songs.show.title'), song, class:"btn btn-default"
          -if @is_dev
            -unless has_children
              =link_to t('link.edit'), edit_song_path(song), class:"btn btn-default"
              =link_to t('link.destroy'), song_path(song), class:"btn btn-default", method: :delete, data:{ confirm:t('confirm.destroy') } if song.can_delete?




